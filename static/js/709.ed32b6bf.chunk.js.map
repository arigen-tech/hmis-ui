{"version":3,"file":"static/js/709.ed32b6bf.chunk.js","mappings":"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","sources":["Views/Admin/Apointment/DoctorRoaster/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { MAS_DEPARTMENT, DOCTOR, DOCTOR_ROSTER, APPOINTMENT , FILTER_OPD_DEPT} from \"../../../../config/apiConfig\";\r\nimport { getRequest, putRequest, postRequest } from \"../../../../service/apiService\";\r\nimport LoadingScreen from \"../../../../Components/Loading\";\r\nimport Popup from \"../../../../Components/popup\";\r\n\r\nconst DoctorRoaster = () => {\r\n  const [department, setDepartment] = useState(\"\");\r\n  const [doctor, setDoctor] = useState(\"\");\r\n  const [fromDate, setFromDate] = useState(\"\");\r\n  const [rowDepartmentData, setRowDepartmentData] = useState([]);\r\n  const [departmentData, setDepartmentData] = useState([]);\r\n  const [doctorData, setDoctorData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [rosterDoctorData, setRosterDoctorData] = useState(null);\r\n  const [popup, setPopup] = useState(\"\");\r\n  const [popupMessage, setPopupMessage] = useState(\"\");\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [originalRosterData, setOriginalRosterData] = useState(null); \r\n\r\n  const jwtToken = sessionStorage.getItem(\"token\") || localStorage.getItem(\"token\");\r\n\r\n\r\n  const showPopup = (message, type = \"info\") => {\r\n    setPopupMessage({\r\n      message,\r\n      type,\r\n      onClose: () => {\r\n        setPopupMessage(null);\r\n      },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDepartmentData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (department) {\r\n      fetchDoctorData();\r\n    }\r\n  }, [department]);\r\n\r\n  useEffect(() => {\r\n    if (department && fromDate) {\r\n      prepareRosterData();\r\n    }\r\n  }, [department, doctor, fromDate, doctorData]);\r\n\r\n\r\n\r\n   const fetchDepartmentData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const data = await getRequest(`${MAS_DEPARTMENT}/getAll/1`);\r\n        if (data.status === 200 && Array.isArray(data.response)) {\r\n          const filteredDepartments = data.response.filter(\r\n            (dept) => dept.departmentTypeName === `${FILTER_OPD_DEPT}`\r\n          );\r\n          setRowDepartmentData(data.response);\r\n          setDepartmentData(filteredDepartments);\r\n        } else {\r\n          console.error(\"Unexpected API response format:\", data);\r\n          setRowDepartmentData([]);\r\n          setDepartmentData([]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching Department data:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n  const fetchDoctorData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await getRequest(`${DOCTOR}/doctorBySpeciality/${department}`);\r\n      if (data.status === 200 && Array.isArray(data.response)) {\r\n        setDoctorData(data.response);\r\n      } else {\r\n        console.error(\"Unexpected API response format:\", data);\r\n        setDoctorData([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching Doctor data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateDatesFromSelectedDate = () => {\r\n    if (!fromDate) return [];\r\n  \r\n    const startDate = new Date(fromDate);\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0); \r\n  \r\n    const dates = [];\r\n  \r\n    for (let i = 0; i < 7; i++) {\r\n      const currentDate = new Date(startDate);\r\n      currentDate.setDate(startDate.getDate() + i);\r\n      currentDate.setHours(0, 0, 0, 0); \r\n  \r\n      if (currentDate > today) {\r\n        const formattedDate = `${currentDate.getDate().toString().padStart(2, '0')}/${(currentDate.getMonth() + 1).toString().padStart(2, '0')}/${currentDate.getFullYear()}`;\r\n        \r\n        dates.push(formattedDate);\r\n      }\r\n    }\r\n  \r\n    let doctorsToUse = [];\r\n  \r\n    if (doctor) {\r\n      const selectedDoctor = doctorData.find(doc => doc.userId === parseInt(doctor));\r\n      if (selectedDoctor) {\r\n        doctorsToUse = [{\r\n          name: `${selectedDoctor.firstName} ${selectedDoctor.lastName}`,\r\n          id: selectedDoctor.userId\r\n        }];\r\n      }\r\n    } else {\r\n      doctorsToUse = doctorData.map(doc => ({\r\n        name: `${doc.firstName} ${doc.lastName}`,\r\n        id: doc.userId\r\n      }));\r\n    }\r\n  \r\n    const generatedDates = doctorsToUse.flatMap(doctorInfo => \r\n      dates.map(date => ({\r\n        dates: date,\r\n        rosterVale: \"YY\", \r\n        doctorId: doctorInfo.id,\r\n        id: null,\r\n        fromDatabase: false,\r\n        morningModified: false,\r\n        eveningModified: false\r\n      }))\r\n    );\r\n  \r\n    return generatedDates;\r\n  };\r\n\r\n  const prepareRosterData = async () => {\r\n    if (!department || !fromDate) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      const queryParams = new URLSearchParams({\r\n        deptId: department,\r\n        rosterDate: fromDate,\r\n      });\r\n\r\n      if (doctor) {\r\n        queryParams.append(\"doctorId\", doctor);\r\n      }\r\n\r\n      const apiUrl = `${DOCTOR_ROSTER}/rosterfindWithDays?${queryParams.toString()}`;\r\n      const existingRosterResponse = await getRequest(apiUrl);\r\n\r\n      const generatedDates = generateDatesFromSelectedDate();\r\n\r\n      let mergedDates = [];\r\n      if (existingRosterResponse.response && existingRosterResponse.response.dates) {\r\n        const existingDates = existingRosterResponse.response.dates.map(date => ({\r\n          ...date,\r\n          fromDatabase: true,\r\n          morningModified: false,\r\n          eveningModified: false\r\n        }));\r\n\r\n        const existingDatesMap = new Map();\r\n        existingDates.forEach(date => {\r\n          const key = `${date.doctorId}-${date.dates}`;\r\n          existingDatesMap.set(key, date);\r\n        });\r\n\r\n        mergedDates = generatedDates.map(genDate => {\r\n          const key = `${genDate.doctorId}-${genDate.dates}`;\r\n          const existingDate = existingDatesMap.get(key);\r\n          \r\n          return existingDate || genDate;\r\n        });\r\n\r\n        existingDates.forEach(existDate => {\r\n          const key = `${existDate.doctorId}-${existDate.dates}`;\r\n          if (!mergedDates.some(md => `${md.doctorId}-${md.dates}` === key)) {\r\n            mergedDates.push(existDate);\r\n          }\r\n        });\r\n      } else {\r\n        mergedDates = generatedDates;\r\n      }\r\n\r\n      const rosterData = {\r\n        departmentId: parseInt(department),\r\n        fromDate: fromDate,\r\n        dates: mergedDates\r\n      };\r\n\r\n      const originalData = JSON.parse(JSON.stringify(rosterData));\r\n      setOriginalRosterData(originalData);\r\n      \r\n      setRosterDoctorData(rosterData);\r\n    } catch (error) {\r\n      console.error(\"Error preparing roster data:\", error);\r\n      showPopup(\"Error preparing roster data\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCheckboxChange = (doctorId, date, session) => {\r\n    const formattedDate = formatDateToLocal(date);\r\n    if (formattedDate < currentDate) return;\r\n\r\n    const updatedDates = rosterDoctorData.dates.map(item => {\r\n      if (item.doctorId === doctorId && item.dates === date) {\r\n        let newRosterValue;\r\n        switch(item.rosterVale) {\r\n          case \"YY\":\r\n            newRosterValue = session === 'morning' ? \"NY\" : \"YN\";\r\n            break;\r\n          case \"YN\":\r\n            newRosterValue = session === 'morning' ? \"NN\" : \"YY\";\r\n            break;\r\n          case \"NY\":\r\n            newRosterValue = session === 'morning' ? \"YY\" : \"NN\";\r\n            break;\r\n          case \"NN\":\r\n            newRosterValue = session === 'morning' ? \"YN\" : \"NY\";\r\n            break;\r\n          default:\r\n            newRosterValue = \"YY\";\r\n        }\r\n\r\n        const originalItem = originalRosterData?.dates.find(orig => \r\n          orig.doctorId === doctorId && orig.dates === date\r\n        );\r\n        \r\n        if (originalItem && item.fromDatabase) {\r\n          const originalValue = originalItem.rosterVale;\r\n          \r\n          const morningModified = session === 'morning' ? \r\n            originalValue.charAt(0) !== newRosterValue.charAt(0) : \r\n            item.morningModified;\r\n            \r\n          const eveningModified = session === 'evening' ? \r\n            originalValue.charAt(1) !== newRosterValue.charAt(1) : \r\n            item.eveningModified;\r\n          \r\n          return { \r\n            ...item, \r\n            rosterVale: newRosterValue,\r\n            morningModified,\r\n            eveningModified\r\n          };\r\n        }\r\n        \r\n        return { ...item, rosterVale: newRosterValue };\r\n      }\r\n      return item;\r\n    });\r\n\r\n    setRosterDoctorData(prev => ({\r\n      ...prev,\r\n      dates: updatedDates\r\n    }));\r\n  };\r\n\r\n  const formatDateToLocal = (dateString) => {\r\n    const [day, month, year] = dateString.split('/');\r\n    return new Date(`${year}-${month}-${day}`);\r\n  };\r\n\r\n  const formatDisplayDate = (dateString) => {\r\n    if (!dateString) return \"\";\r\n    const [day, month, year] = dateString.split('/');\r\n    const date = new Date(`${year}-${month}-${day}`);\r\n    return date.toLocaleDateString('en-US', { day: '2-digit', month: 'short', year: 'numeric' });\r\n  };\r\n\r\n  const isDateDisabled = (dateString) => {\r\n    const rosterDate = formatDateToLocal(dateString);\r\n    return rosterDate < currentDate;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!department || !fromDate) {\r\n      showPopup(\"Please select Department and From Date\", \"error\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const endpoint = `${DOCTOR_ROSTER}/roster`;\r\n      \r\n      const dataToSend = {\r\n        ...rosterDoctorData,\r\n        dates: rosterDoctorData.dates.map(({ fromDatabase, morningModified, eveningModified, ...rest }) => rest)\r\n      };\r\n      \r\n      const response = await postRequest(endpoint, dataToSend);\r\n\r\n      if (response.status === 200) {\r\n        showPopup(\"Roster saved successfully!\", \"success\");\r\n        handleReset();\r\n        prepareRosterData(); \r\n      } else {\r\n        showPopup(`Error saving roster: ${response.message || \"Unknown error\"}`, \"error\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error saving roster:\", error);\r\n      showPopup(\"An error occurred while saving the roster\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setDepartment(\"\");\r\n    setDoctor(\"\");\r\n    setFromDate(\"\");\r\n    setRosterDoctorData(null);\r\n    setOriginalRosterData(null);\r\n  };\r\n\r\n  const getMorningCheckboxStyle = (dateItem) => {\r\n    if (dateItem.fromDatabase && dateItem.morningModified) {\r\n      return { backgroundColor: \"#ffd24d\", borderColor: \"#ffd24d\" };\r\n    } \r\n    else if (dateItem.fromDatabase) {\r\n      return { backgroundColor: \"#55bf70\", borderColor: \"#55bf70\" }; \r\n    }\r\n    return {};\r\n  };\r\n  \r\n  const getEveningCheckboxStyle = (dateItem) => {\r\n    if (dateItem.fromDatabase && dateItem.eveningModified) {\r\n      return { backgroundColor: \"#ffd24d\", borderColor: \"#ffd24d\" }; \r\n    } \r\n    else if (dateItem.fromDatabase) {\r\n      return { backgroundColor: \"#55bf70\", borderColor: \"#55bf70\" }; \r\n    }\r\n    return {};\r\n  };\r\n\r\n  const renderRosterTable = () => {\r\n    if (!rosterDoctorData || !rosterDoctorData.dates || rosterDoctorData.dates.length === 0) return null;\r\n\r\n    const doctorRosterMap = new Map();\r\n    rosterDoctorData.dates.forEach(item => {\r\n      if (!doctorRosterMap.has(item.doctorId)) {\r\n        doctorRosterMap.set(item.doctorId, []);\r\n      }\r\n      doctorRosterMap.get(item.doctorId).push(item);\r\n    });\r\n\r\n    const allDates = [...new Set(rosterDoctorData.dates.map(item => item.dates))].sort((a, b) => {\r\n      const dateA = formatDateToLocal(a);\r\n      const dateB = formatDateToLocal(b);\r\n      return dateA - dateB;\r\n    });\r\n\r\n    return (\r\n      <div className=\"table-responsive\">\r\n        <table className=\"table table-bordered\">\r\n          <thead>\r\n            <tr>\r\n              <th>Doctor</th>\r\n              {allDates.map(date => (\r\n                <th key={date} className=\"text-center\">\r\n                  {formatDisplayDate(date)}\r\n                  <div className=\"small text-muted\">\r\n                    {formatDateToLocal(date).toLocaleDateString('en-US', { weekday: 'short' })}\r\n                  </div>\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {[...doctorRosterMap.entries()].map(([doctorId, doctorDates]) => {\r\n              const doctor = doctorData.find(d => d.userId === doctorId);\r\n              const doctorName = doctor ? `${doctor.firstName} ${doctor.lastName}` : 'Unknown Doctor';\r\n\r\n              return (\r\n                <tr key={doctorId}>\r\n                  <td>{doctorName}</td>\r\n                  {allDates.map(date => {\r\n                    const dateItem = doctorDates.find(d => d.dates === date);\r\n                    \r\n                    if (!dateItem) {\r\n                      return (\r\n                        <td key={date} className=\"text-center text-muted\">\r\n                          N/A\r\n                        </td>\r\n                      );\r\n                    }\r\n\r\n                    const isDisabled = isDateDisabled(date);\r\n                    const rosterValue = dateItem.rosterVale;\r\n\r\n                    return (\r\n                      <td key={date} className=\"text-center\">\r\n                        <div className=\"form-check form-check-inline\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            className=\"form-check-input\"\r\n                            checked={rosterValue === \"YY\" || rosterValue === \"YN\"}\r\n                            onChange={() => handleCheckboxChange(doctorId, date, 'morning')}\r\n                            disabled={isDisabled}\r\n                            style={getMorningCheckboxStyle(dateItem)}\r\n                          />\r\n                          <label\r\n                            className={`form-check-label ${isDisabled ? 'text-muted' : ''}`}\r\n                          >\r\n                            M\r\n                          </label>\r\n                        </div>\r\n                        <div className=\"form-check form-check-inline\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            className=\"form-check-input\"\r\n                            checked={rosterValue === \"YY\" || rosterValue === \"NY\"}\r\n                            onChange={() => handleCheckboxChange(doctorId, date, 'evening')}\r\n                            disabled={isDisabled}\r\n                            style={getEveningCheckboxStyle(dateItem)}\r\n                          />\r\n                          <label\r\n                            className={`form-check-label ${isDisabled ? 'text-muted' : ''}`}\r\n                          >\r\n                            E\r\n                          </label>\r\n                        </div>\r\n                      </td>\r\n                    );\r\n                  })}\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n        <div className=\"mt-2\">\r\n          <div className=\"d-flex align-items-center mb-2\">\r\n            <div style={{width: '20px', height: '20px', backgroundColor: '#55bf70', marginRight: '10px'}}></div>\r\n            <span>Data from database</span>\r\n          </div>\r\n          <div className=\"d-flex align-items-center mb-2\">\r\n            <div style={{width: '20px', height: '20px', backgroundColor: '#ffd24d', marginRight: '10px'}}></div>\r\n            <span>Modified database data</span>\r\n          </div>\r\n          <div className=\"d-flex align-items-center\">\r\n            <div style={{width: '20px', height: '20px', backgroundColor: '#0d6efd', marginRight: '10px'}}></div>\r\n            <span>New data</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"body d-flex py-3\">\r\n      <div className=\"container-xxl\">\r\n        <div className=\"row align-items-center\">\r\n          <div className=\"border-0 mb-4\">\r\n            <div className=\"card-header py-3 bg-transparent d-flex align-items-center px-0 justify-content-between border-bottom flex-wrap\">\r\n              <h3 className=\"fw-bold mb-0\">Doctor Roster</h3>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {popupMessage && (\r\n          <Popup\r\n            message={popupMessage.message}\r\n            type={popupMessage.type}\r\n            onClose={popupMessage.onClose}\r\n          />\r\n        )}\r\n        {loading && (\r\n          <LoadingScreen />\r\n        )}\r\n\r\n        <div className=\"row mb-3\">\r\n          <div className=\"col-sm-12\">\r\n            <div className=\"card shadow mb-3\">\r\n              <div className=\"card-body\">\r\n                <form onSubmit={handleSubmit}>\r\n                  <div className=\"row g-3\">\r\n                    <div className=\"col-md-4\">\r\n                      <label className=\"form-label\">Department *</label>\r\n                      <select\r\n                        className=\"form-select\"\r\n                        value={department}\r\n                        onChange={(e) => setDepartment(parseInt(e.target.value))}\r\n                        required\r\n                      >\r\n                        <option value=\"\" disabled>Select</option>\r\n                        {departmentData.map((dept) => (\r\n                          <option key={dept.id} value={dept.id}>\r\n                            {dept.departmentName}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n\r\n                    <div className=\"col-md-4\">\r\n                      <label className=\"form-label\">Doctor (Optional)</label>\r\n                      <select\r\n                        className=\"form-select\"\r\n                        value={doctor}\r\n                        onChange={(e) => setDoctor(e.target.value)}\r\n                        disabled={!department}\r\n                      >\r\n                        <option value=\"\">All Doctors</option>\r\n                        {doctorData.map((doc) => (\r\n                          <option key={doc.userId} value={doc.userId}>\r\n                            {doc.firstName} {doc.middleName} {doc.lastName}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n\r\n                    <div className=\"col-md-4\">\r\n                      <label className=\"form-label\">From Date *</label>\r\n                      <input\r\n                        type=\"date\"\r\n                        className=\"form-control\"\r\n                        value={fromDate}\r\n                        onChange={(e) => setFromDate(e.target.value)}\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    {rosterDoctorData && renderRosterTable()}\r\n                  </div>\r\n\r\n                  <div className=\"mt-4\">\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"btn btn-primary me-2\"\r\n                      disabled={loading || !rosterDoctorData}\r\n                    >\r\n                      {loading ? 'Processing...' : 'Save Roster'}\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-secondary\"\r\n                      onClick={handleReset}\r\n                      disabled={loading}\r\n                    >\r\n                      Reset\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DoctorRoaster;"],"names":["DoctorRoaster","department","setDepartment","useState","doctor","setDoctor","fromDate","setFromDate","rowDepartmentData","setRowDepartmentData","departmentData","setDepartmentData","doctorData","setDoctorData","loading","setLoading","rosterDoctorData","setRosterDoctorData","popup","setPopup","popupMessage","setPopupMessage","currentDate","setCurrentDate","Date","originalRosterData","setOriginalRosterData","showPopup","sessionStorage","getItem","localStorage","message","type","arguments","length","undefined","onClose","useEffect","fetchDepartmentData","fetchDoctorData","prepareRosterData","async","data","getRequest","MAS_DEPARTMENT","status","Array","isArray","response","filteredDepartments","filter","dept","departmentTypeName","FILTER_OPD_DEPT","console","error","DOCTOR","queryParams","URLSearchParams","deptId","rosterDate","append","apiUrl","DOCTOR_ROSTER","toString","existingRosterResponse","generatedDates","generateDatesFromSelectedDate","startDate","today","setHours","dates","i","setDate","getDate","formattedDate","padStart","getMonth","getFullYear","push","doctorsToUse","selectedDoctor","find","doc","userId","parseInt","name","firstName","lastName","id","map","flatMap","doctorInfo","date","rosterVale","doctorId","fromDatabase","morningModified","eveningModified","mergedDates","existingDates","existingDatesMap","Map","forEach","key","set","genDate","get","existDate","some","md","rosterData","departmentId","originalData","JSON","parse","stringify","handleCheckboxChange","session","formatDateToLocal","updatedDates","item","newRosterValue","originalItem","orig","originalValue","charAt","prev","dateString","day","month","year","split","formatDisplayDate","toLocaleDateString","handleReset","getMorningCheckboxStyle","dateItem","backgroundColor","borderColor","getEveningCheckboxStyle","_jsx","className","children","_jsxs","Popup","LoadingScreen","onSubmit","e","preventDefault","endpoint","dataToSend","_ref","rest","postRequest","value","onChange","target","required","disabled","departmentName","middleName","renderRosterTable","doctorRosterMap","has","allDates","Set","sort","a","b","weekday","entries","_ref2","doctorDates","d","doctorName","isDisabled","rosterValue","checked","style","width","height","marginRight","onClick"],"sourceRoot":""}